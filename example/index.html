<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" /> 
        <title>bbfy test page</title>
        <!-- <script src="../node_modules/requirejs/require.js"></script> -->
        <script src="../target/bbfy.browser.js"></script>
    </head>
    <body>
        <h1>bbfy test page</h1>
        <textarea id="input" rows="25" cols="80">[b]Write BBCode here.[/b]</textarea>
        <textarea id="output" rows="25" cols="80" readonly="true"></textarea>
        <div id="html"></div>
        <script> /*
            require.config({
              baseUrl: '../',
              paths: {
                underscore: 'node_modules/underscore/underscore-min',
                parsimmon: 'node_modules/parsimmon/build/parsimmon.browser.min',
                bbfy: 'target/bbfy'
              },
              shim: {
                parsimmon: { exports: 'Parsimmon' }
              }
            });
*/            
            //require(['bbfy'], function (bbfy) {
              var convert = bbfy.converter();
              var input = document.getElementById('input');
              var output = document.getElementById('output');
              var html = document.getElementById('html');

              var update = function (text) {
                var bbcode = convert(text);
                output.value = bbcode;
                html.innerHTML = bbcode;
              }
              
              input.addEventListener('input', function (e) {
                update(e.target.value || '');
              });

              update(input.value);
            //});
        </script>
    </body>
</html>
